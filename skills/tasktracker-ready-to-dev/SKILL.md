---
name: tasktracker-ready-to-dev
description: Проверка качества постановки задач в ERP TaskTracker по URL задачи, автоматическое получение данных через ERP API, публикация структурированного комментария с замечаниями при провале проверки и генерация плана реализации в /tasks/{TaskId}.md при успешной проверке. Использовать, когда пользователь просит проверить задачу TaskTracker по ссылке или сформировать технический план реализации по задаче.
---

# TaskTracker Autocheck Plan

Используй `scripts/get_task_data.py` как ЕДИНСТВЕННУЮ точку получения данных задачи. Не выдумывай данные. Если не можешь запустить скрипт — остановись и попроси у пользователя JSON-вывод скрипта целиком.

Пример запуска:

```bash
python scripts/get_task_data.py --url "https://erp.visary.cloud/tasktracker/projects/{ProjectId}/tasks/{TaskId}"
```

Скрипт возвращает JSON с полями:

- `TaskId`
- `Title`
- `Description`

## Порядок выполнения

1. Запусти `scripts/get_task_data.py` с URL задачи.
2. Если скрипт завершился с ошибкой, зафиксируй причину и заверши выполнение.
3. Возьми `TaskId`, `Title`, `Description` из JSON-результата.
4. Выполни проверку качества постановки.
5. Если есть замечания, создай комментарий.
6. Если замечаний нет, сформируй и сохрани план в `/tasks/{TaskId}.md`.

## Критерии проверки

Проверь и зафиксируй результат по каждому пункту:

- Четко сформулирована цель.
- Есть ожидаемый результат.
- Есть критерии приемки.
- Нет противоречий между разделами.
- Нет противоречий с текущей реализацией в репозитории.
- Данных достаточно для начала реализации.

Считай проверку пройденной только если все пункты пройдены.

## Комментарий при провале

Если найдены замечания, сформируй структурированный комментарий:

- Краткий вывод о статусе проверки.
- Список проблем (по одной проблеме на пункт).
- Конкретные рекомендации по исправлению для каждой проблемы.

Используй API:

- `POST https://erp.visary.cloud/api/tasktracker/taskComment/command/Create`

Body:

```json
{
  "taskId": "{TaskId}",
  "parentId": null,
  "text": "...",
  "files": null
}
```

## План реализации при успехе

Если замечаний нет, создай пошаговый план реализации Markdown-файл `/tasks/{TaskId}.md` с учетом текущей реализации в репозитории.

Добавь в начало файла:

- Идентификатор и ссылку на задачу
- Дату генерации плана

## Требования к устойчивости

- Для получения задачи используй `scripts/get_task_data.py`.
- Не создавай комментарий, если замечаний нет.
- Не создавай план, если проверка не пройдена.
- Завершай выполнение с явной причиной при критических ошибках (token/task fetch).
